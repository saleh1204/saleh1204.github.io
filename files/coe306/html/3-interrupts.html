<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="Hazem Selmi, Ahmad Khayyat, Saleh AlSaleh">
<title>Experiment 3: Interrupts</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/atom-one-light.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Experiment 3: Interrupts</h1>
<div class="details">
<span id="author" class="author">Hazem Selmi</span><br>
<span id="author2" class="author">Ahmad Khayyat</span><br>
<span id="author3" class="author">Saleh AlSaleh</span><br>
<span id="revnumber">version 212,</span>
<span id="revdate">14 February 2022</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_objectives">1. Objectives</a></li>
<li><a href="#_parts_list">2. Parts List</a></li>
<li><a href="#_background">3. Background</a>
<ul class="sectlevel2">
<li><a href="#_interrupts_in_lpc1768">3.1. Interrupts in LPC1768</a></li>
<li><a href="#config_interrupts">3.2. Configuring Microcontroller Interrupts</a></li>
<li><a href="#_external_interrupts">3.3. External Interrupts</a></li>
</ul>
</li>
<li><a href="#_tasks">4. Tasks</a>
<ul class="sectlevel2">
<li><a href="#_one_external_interrupt">4.1. One External Interrupt</a></li>
<li><a href="#_two_external_interrupts">4.2. Two External Interrupts</a></li>
</ul>
</li>
<li><a href="#_grading_sheet">5. Grading Sheet</a></li>
<li><a href="#_resources">Resources</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_objectives">1. Objectives</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Understand interrupts in LPC1768</p>
</li>
<li>
<p>Using external interrupts</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parts_list">2. Parts List</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>LPC1768 mbed board</p>
</li>
<li>
<p>USB A-Type to Mini-B cable</p>
</li>
<li>
<p>Breadboard</p>
</li>
<li>
<p>LEDs</p>
</li>
<li>
<p>Push-buttons or switches</p>
</li>
<li>
<p>330-Ohm Resistors</p>
</li>
<li>
<p>Jumper wires</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_background">3. Background</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Interrupts are essential for embedded systems. The information in this
experiment will be used in all future experiments in this lab.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_interrupts_in_lpc1768">3.1. Interrupts in LPC1768</h3>
<div class="paragraph">
<p>Interrupts allow for suspending the currently executing code, and
having the CPU switch to execute a routine associated with the
received interrupt request.</p>
</div>
<div class="paragraph">
<p>In LPC1768, there are 35 hardware interrupts. Each interrupt is
identified by a number called <code>IRQn</code>, or <em>Interrupt ID</em> as called in
the LPC1768 manual. Below are some examples of hardware interrupts and
their IDs:</p>
</div>
<table id="int_ids" class="tableblock frame-all grid-all" style="width: 40%;">
<caption class="title">Table 1. Example Interrupt IDs</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Interrupt ID</th>
<th class="tableblock halign-left valign-top">Interrupt Source</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer 0</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer 1</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UART 0</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UART 1</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SPI</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EINT0</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EINT1</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EINT2</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EINT3</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">33</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB Activity Interrupt</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
In CMSIS, interrupts are numbered from 0 to 34.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In addition to these 35 interrupts, there are 8 exceptions with negative
numbers. Exceptions are not discussed in this experiment.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Exercise</div>
<div class="paragraph">
<p>Find the interrupt number definitions of the LPC1768 in the <code>lpc17xx.h</code> header
file.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_setting_up_interrupts_in_lpc1768">3.1.1. Setting up Interrupts in LPC1768</h4>
<div class="paragraph">
<p>There are four main steps to correctly setup any interrupt in LPC1768:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure the required peripheral to generate interrupt requests. For example,
to be able to use a timer interrupt, a timer must be activated and configured
to generate interrupt requests.</p>
</li>
<li>
<p>Enable the interrupt in the <em>Nested Vectored Interrupt Controller (NVIC)</em>. See
<a href="#nvic">Enabling the Interrupt in the NVIC</a> for more information about the NVIC.</p>
</li>
<li>
<p>Write an <em>interrupt service routine (ISR)</em>: the routine that needs to be
executed when an interrupt request is received.</p>
</li>
<li>
<p>Clear the interrupt request at the end of the ISR to allow future requests of
the same interrupt.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Some peripherals that are capable of generating interrupts can also be used
without interrupts. There are valid uses for either approach. That&#8217;s why it is
required to configure devices to generate interrupt requests when that behavior
is desired (step 1 in the list above).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Upon setting up an interrupt as described above, the LPC1768 microcontroller
will be responsible for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Detecting the interrupt request generated by a peripheral. This request will
be generated by the peripheral that has been enabled by software.</p>
</li>
<li>
<p>Jumping to the interrupt service routine associated with that request.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="config_interrupts">3.2. Configuring Microcontroller Interrupts</h3>
<div class="paragraph">
<p>This section elaborates the four steps listed in the previous section
(<a href="#_setting_up_interrupts_in_lpc1768">Setting up Interrupts in LPC1768</a>) to configure the LPC1768 microcontroller
to handle interrupt requests generated by a given device.</p>
</div>
<div class="paragraph">
<p>The programmer must perform four main steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enable a peripheral to generate a hardware interrupt request
(not to be discussed here because it is peripheral dependent)</p>
</li>
<li>
<p>Enable the required interrupt in the NVIC</p>
</li>
<li>
<p>Write an interrupt service routine (ISR)</p>
</li>
<li>
<p>Clear the interrupt request at the end of the ISR</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="nvic">3.2.1. Enabling the Interrupt in the NVIC</h4>
<div class="paragraph">
<p>The Nested Vectored Interrupt Controller (NVIC) offers very fast
interrupt handling and provides the vector table <a href="#keil-nvic">[keil-nvic]</a>.</p>
</div>
<div class="paragraph">
<p>In addition, the NVIC:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Saves and restores automatically a set of the CPU registers (R0-R3,
R12, PC, PSR, and LR).</p>
</li>
<li>
<p>Does a quick entry to the next pending interrupt without a complete
pop/push sequence.</p>
</li>
<li>
<p>Provides many other advanced features.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">NVIC Functions</div>
<p>The CMSIS core module defines a set of interrupt helper functions. For
example, to enable interrupts for a given interrupt ID, you can use
the function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">NVIC_EnableIRQ(IRQn);  // IRQn is the interrupt ID</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, for <code>UART1</code>, <code>IRQn</code> is 6 (see <a href="#int_ids">Example Interrupt
IDs Table</a>). You can use this number or use the given name in
<code>lpc17xx.h</code>: <code>UART1_IRQn</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_isr">3.2.2. The ISR</h4>
<div class="paragraph">
<p>Whenever an interrupt request is generated, the CPU will jump to the
corresponding ISR. When using CMSIS, the ISR is a C function that has
the following prototype format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">void __peripheral___IRQHandler();</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 1. An ISR for the TIMER2 Device</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">void TIMER2_IRQHandler() {
    // Your code goes here
    // Clear the interrupt request at the end of the ISR
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are using mbed online compiler, you need to wrap the interrupt handler by an <code>extern "C"</code> as shown below since mbed online compiler uses C++ compiler rather than C compiler.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">extern "C" {
   void TIMER2_IRQHandler() {
    // Your code goes here
    // Clear the interrupt request at the end of the ISR
  }
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_clearing_the_interrupt_request">3.2.3. Clearing the Interrupt Request</h4>
<div class="paragraph">
<p>As indicated in the format of the ISR above, the last statement in any
ISR should be to clear the request that has just been served. This is
required to allow future requests of the same interrupt.</p>
</div>
<div class="paragraph">
<p>This step is peripheral-dependent and is usually done by clearing a
bit in one of the peripheral registers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_other_interrupt_related_operations">3.2.4. Other Interrupt-Related Operations</h4>
<div class="paragraph">
<p>Interrupts will not function at all without the above four
steps. There are other issues, however, that are not essential in
simple applications, but can be very useful and even essential in some
applications, especially when you have multiple interrupts. We will
discuss two such issues here:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Interrupt status</p>
</li>
<li>
<p>Interrupt priority</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_interrupt_status">Interrupt Status</h5>
<div class="paragraph">
<p>Sometimes, you need to check the status of a specific interrupt. For example, is
it pending, active or disabled.</p>
</div>
<div class="paragraph">
<p>When using CMSIS, the status of interrupts can be checked by calling one of the
following functions, depending on the application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>uint32_t NVIC_GetPendingIRQ(IRQn_Type IRQn)</code></p>
<div class="ulist">
<ul>
<li>
<p>If the interrupt status is <em>not pending</em>, the function returns <code>0</code>.</p>
</li>
<li>
<p>If the interrupt status is <em>pending</em>, the function returns <code>1</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>uint32_t NVIC_GetActive(IRQn_Type IRQn)</code></p>
<div class="ulist">
<ul>
<li>
<p>If the interrupt status is <em>not active</em>, the function returns <code>0</code>.</p>
</li>
<li>
<p>If the interrupt status is <em>active</em>, the function returns <code>1</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_interrupt_priority">Interrupt Priority</h5>
<div class="paragraph">
<p>When using CMSIS, you can set interrupt priorities by calling the
function:</p>
</div>
<div class="paragraph">
<p><code>void NVIC_SetPriority(IRQn_Type IRQn, uint32_t priority)</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The fist argument is the interrupt ID.</p>
</li>
<li>
<p>The second argument represents the priority, where 0 is the highest
priority and 31 is the lowest priority.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To assign a different priority for each interrupt, you need to call
this function for every interrupt you are using.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_external_interrupts">3.3. External Interrupts</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To practice interrupts, we will concentrate on external interrupts only in this
experiment, since other hardware interrupts require understanding the functions
with which they are associated, which we did not cover yet.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One type of interrupts that is easy to experiment with is external
interrupts. They are the interrupts that are generated by a device outside the
microcontroller. An external interrupt should be connected to one of the I/O
port pins.</p>
</div>
<div class="paragraph">
<p>In external interrupts, an interrupt request is generated by a pulse at a pin
that has been enabled to accept external interrupt requests. A simple way to
implement that is to use a push-button to generate that request.</p>
</div>
<div class="paragraph">
<p>The difference between such implementation and what you did in Experiment 2
is that in Experiment 2, we used <em>polling</em>, where the CPU is always
busy reading the pin in order to detect a change that would trigger some
action. When using interrupts, however, the CPU is available to execute other
code. When the push-button is pressed, the CPU stops whatever it is doing and
jumps to the routine associated with that interrupt request.</p>
</div>
<div class="paragraph">
<p>There are four external interrupt channels available to the developer,
called <code>EINT0</code>, <code>EINT1</code>, <code>EINT2</code> and <code>EINT3</code>. In older ARM versions, a
pin&#8217;s function must be set for the pin to act as an external
interrupt. This is done using the <code>PINSELx</code> register.
However, one of the new features of the newer
Cortex family is accepting external interrupts from some GPIO pins!
Any GPIO pin used for external interrupts will be using external
interrupt channel 3 (<code>EINT3</code>).</p>
</div>
<div class="paragraph">
<p>You can use GPIO pins from ports 0 and 2 only for external
interrupts. You have about 24 different pins to choose from. Compare
that, for example, to ARM7 where only 7 pins are available for
external interrupts.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>External interrupts can be enabled on two sets of pins:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Four dedicated pins (P2.10, P2.11, P2.12 and P2.13) that act as
<code>EINT0</code>, <code>EINT1</code>, <code>EINT2</code>, and <code>EINT3</code>, respectively.</p>
</li>
<li>
<p>Any GPIO pin in port 0 and port 2.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the two following sections, we will discuss and practice:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GPIO external interrupts</p>
</li>
<li>
<p>Non-GPIO external interrupts</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_gpio_external_interrupts">3.3.1. GPIO external interrupts</h4>
<div class="paragraph">
<p>GPIO external interrupts share the same ISR for EINT3. As discussed in <a href="#_setting_up_interrupts_in_lpc1768">Setting up Interrupts in LPC1768</a>, you always need to enable
the NVIC and write an ISR.</p>
</div>
<div class="paragraph">
<p>For GPIO external interrupts, that leaves two more steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Activating GPIO external interrupts</p>
</li>
<li>
<p>clearing a GPIO interrupt request at the end of the ISR</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_activating_gpio_external_interrupts">Activating GPIO External Interrupts</h5>
<div class="paragraph">
<p>To activate external interrupts on a GPIO pin, you only need to
configure whether the pin is to generate an interrupt request on the
rising edge or on the falling edge.</p>
</div>
<div class="paragraph">
<p>You can set external interrupts to be generated on the <em>rising edge</em>
on a GPIO pin by setting the <code>IO0IntEnR</code> and <code>IO2IntEnR</code> registers,
depending on the port to which the pin belongs. These names refer to
32-bit registers. Setting a bit to <code>1</code> enables rising-edge interrupts
at the corresponding pin.</p>
</div>
<div class="paragraph">
<p>To generate interrupts on the <em>falling edge</em>, you can use the
<code>IO0IntEnF</code> and <code>IO2IntEnF</code> registers instead.</p>
</div>
<div class="paragraph">
<p>In <code>LPC17xx.h</code>, the structure that deals with GPIO external interrupts
is <code>LPC_GPIOINT</code>, which includes a few fields that control the GPIO
pins when acting as an external interrupt.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Enable Rising-Edge Interrupts on Pin 0 of Port 2 Only</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">LPC_GPIOINT-&gt;IO2IntEnR = 1;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_clearing_external_gpio_interrupt_requests">Clearing External GPIO Interrupt Requests</h5>
<div class="paragraph">
<p>To clear the interrupts of a port pin, set the corresponding bit to
<code>1</code> in register <code>IO0IntClr</code> or <code>IO2IntClr</code>, depending on the
port. Both registers are fields of the <code>LPC_GPIOINT</code> structure.</p>
</div>
</div>
<div class="sect4">
<h5 id="_other_issues_related_to_gpio_interrupts">Other issues related to GPIO interrupts</h5>
<div class="paragraph">
<div class="title">Level and Edge Sensitivity (For Non-GPIO Interrupts)</div>
<p>You may have noted that, to enable GPIO interrupts, you have to select whether
they are triggered by the rising or falling edge of the pulse at the pin.</p>
</div>
<div class="paragraph">
<div class="title">Interrupt Status for GPIO External Interrupts</div>
<p>You can check for pending GPIO interrupts by reading the appropriate
status register. There are four status registers for ports 0 and 2
that indicate whether an interrupt is pending, and whether it is
triggered by a rising edge or a falling edge. They are <code>IO0IntStatR</code>,
<code>IO2IntStatR</code>, <code>IO0IntStatF</code>, and <code>IO2IntStatF</code>.</p>
</div>
<div class="paragraph">
<p>For Example, if bit 9 of <code>IO2IntStatR</code> is <code>1</code>, then P2.09 has a
pending rising-edge interrupt request.</p>
</div>
<div class="paragraph">
<p>This is particularly important when you have multiple interrupts sharing the
same interrupt channel (EINT3 in our case). Any one of them can result in
executing the same ISR. Now, If you want to perform different actions for each
interrupt, you need to identify the source interrupt in order to perform the
corresponding action. You can do that by checking the status registers in your
ISR.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_non_gpio_external_interrupts">3.3.2. Non-GPIO external interrupts</h4>
<div class="paragraph">
<p>External interrupt requests can be generated using any of the 4
dedicated external interrupt pins, named <code>EINT1</code>, <code>EINT2</code>, <code>EINT3</code>,
and <code>EINT4</code>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
EINT0 
</td>
<td class="hdlist2">
<p>P2.10</p>
</td>
</tr>
<tr>
<td class="hdlist1">
EINT1 
</td>
<td class="hdlist2">
<p>P2.11</p>
</td>
</tr>
<tr>
<td class="hdlist1">
EINT2 
</td>
<td class="hdlist2">
<p>P2.12</p>
</td>
</tr>
<tr>
<td class="hdlist1">
EINT3 
</td>
<td class="hdlist2">
<p>P2.13</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>However, These four pins are not available in LPC1768 mbed board.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tasks">4. Tasks</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_one_external_interrupt">4.1. One External Interrupt</h3>
<div class="paragraph">
<p>Use a push-button to generate an external interrupt using a GPIO
  pin. Do something interesting in the ISR!</p>
</div>
</div>
<div class="sect2">
<h3 id="_two_external_interrupts">4.2. Two External Interrupts</h3>
<div class="paragraph">
<p>Use two external interrupts, where each interrupt triggers a different task. For example, each interrupt could blink an LED 10 times at a different rate.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
All tasks must be completed during the lab session.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_grading_sheet">5. Grading Sheet</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 83.3333%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Task</th>
<th class="tableblock halign-left valign-top">Points</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Task 1: External interrupt using a GPIO pin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Task 2: Two external interrupts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discussion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="keil-nvic"></a>[keil-nvic]</p>
<div class="paragraph">
<p>Cortex-M3 'Technical Reference Manual'<br>
  <a href="https://www.keil.com/dd/docs/datashts/arm/cortex_m3/r1p1/ddi0337e_cortex_m3_r1p1_trm.pdf" class="bare">https://www.keil.com/dd/docs/datashts/arm/cortex_m3/r1p1/ddi0337e_cortex_m3_r1p1_trm.pdf</a></p>
</div>
</li>
<li>
<p><a id="lpc1768-manual"></a>[lpc1768-manual]</p>
<div class="paragraph">
<p>NXP Semiconductors. <em>UM10360&#8201;&#8212;&#8201;LPC176x/5x User
  Manual</em>. Rev. 3.1. 4 April 2014.<br>
  <a href="https://www.waveshare.com/w/upload/0/07/LPC176x5x_User_manual_EN.pdf" class="bare">https://www.waveshare.com/w/upload/0/07/LPC176x5x_User_manual_EN.pdf</a></p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 212<br>
Last updated 2022-02-27 10:36:26 +0300
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>